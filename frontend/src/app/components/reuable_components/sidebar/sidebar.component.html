<div class="fixed top-3 left-3 bottom-3 w-[250px] bg-black text-white p-5 flex flex-col overflow-y-auto overflow-x-hidden rounded-xl border-2 border-gray-400 [scrollbar-width:none] [-ms-overflow-style:none] [-webkit-scrollbar-width:0] [-webkit-scrollbar-track:transparent] [-webkit-scrollbar-thumb:#444]">
  <div class="flex items-center mb-8">
    <img src="https://i.ibb.co/d4hxkx4z/Screenshot-from-2025-12-13-11-45-01.png" alt="School Logo" class="h-[75px] w-[80px] object-fill rounded-lg" />
    <div>
      <h1 class="text-white text-lg font-semibold">Little Buds</h1>
      @if (currentUser) {
      <div class="flex flex-row text-gray-300 text-sm font-body">
        <div>{{ currentUser.display_name || currentUser.email }},</div>
        <div class="ml-1">{{ currentUser.role || 'user' }}</div>
      </div>
      }
    </div>
  </div>

  <ul class="list-none p-0 m-0 font-body">
    @if (isSupAdmin()) {
    <li routerLink="/dashboard" routerLinkActive="active" class="p-3 cursor-pointer flex items-center hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">
      <mat-icon class="mr-3 text-white [&.active]:text-black">dashboard</mat-icon> Dashboard
    </li>
    }

    <li (click)="toggleSection('students')" class="p-3 cursor-pointer flex items-center justify-between hover:bg-gray-800 rounded transition-colors">
      <div class="flex items-center">
        <mat-icon class="mr-3">school</mat-icon> Students
      </div>
      <mat-icon>{{ isOpen.students ? 'expand_less' : 'expand_more' }}</mat-icon>
    </li>
@if (isOpen.students) {
<ul class="list-none pl-5 text-muted text-sm text-right font-body">
  <li routerLink="/students-info" routerLinkActive="active" class="p-2 cursor-pointer text-gray-300 hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">Students-Info</li>
  <li routerLink="/attendence" routerLinkActive="active" class="p-2 cursor-pointer text-gray-300 hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">Attendance</li>
  <li routerLink="/homework" routerLinkActive="active" class="p-2 cursor-pointer text-gray-300 hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">Homework</li>
  <li routerLink="/academics" routerLinkActive="active" class="p-2 cursor-pointer text-gray-300 hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">Academics</li>
</ul>
}

    <li (click)="toggleSection('teachers')" class="p-3 cursor-pointer flex items-center justify-between hover:bg-gray-800 rounded transition-colors">
      <div class="flex items-center">
        <mat-icon class="mr-3">person</mat-icon> Teachers
      </div>
      <mat-icon>{{ isOpen.teachers ? 'expand_less' : 'expand_more' }}</mat-icon>
    </li>
    @if (isOpen.teachers) {
    <ul class="list-none pl-5 text-muted text-sm text-right font-body">
      <li routerLink="/teachers-info" routerLinkActive="active" class="p-2 cursor-pointer hover:bg-gray-800 rounded text-gray-300 transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">teachers-info</li>
      <li routerLink="/teachersattendence" routerLinkActive="active" class="p-2 cursor-pointer hover:bg-gray-800 text-gray-300 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">Attendance</li>
      <li routerLink="/salaries" routerLinkActive="active" class="p-2 cursor-pointer hover:bg-gray-800 rounded text-gray-300 transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">Salaries</li>
    </ul>
    }

    @if (isAdmin()) {
    <li (click)="toggleSection('finance')" class="p-3 cursor-pointer flex items-center justify-between hover:bg-gray-800 rounded transition-colors">
      <div class="flex items-center">
        <mat-icon class="mr-3">account_balance_wallet</mat-icon> Finance
      </div>
      <mat-icon>{{ isOpen.finance ? 'expand_less' : 'expand_more' }}</mat-icon>
    </li>
    }
    @if (isOpen.finance) {
    <ul class="list-none pl-5 text-muted text-sm text-right font-body">
      <li routerLink="/fee-collection" routerLinkActive="active" class="p-2 cursor-pointer text-gray-300 hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">Fee Collection</li>
      <li routerLink="/fee-structure" routerLinkActive="active" class="p-2 cursor-pointer text-gray-300 hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">Fee Structure</li>
      <li routerLink="/accounting" routerLinkActive="active" class="p-2 cursor-pointer text-gray-300 hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">Accounting</li>
    </ul>
    }

    <li routerLink="/calendar" routerLinkActive="active" class="p-3 cursor-pointer flex items-center hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">
      <mat-icon class="mr-3 [&.active]:text-black">calendar_today</mat-icon> Calendar
    </li>
    <li routerLink="/timetable" routerLinkActive="active" class="p-3 cursor-pointer flex items-center hover:bg-gray-800 rounded transition-colors [&.active]:bg-white [&.active]:text-black [&.active]:text-primary">
      <mat-icon class="mr-3 [&.active]:text-black">schedule</mat-icon> Time Table
    </li>
    <li class="p-3 cursor-pointer flex items-center hover:bg-gray-800 rounded transition-colors">
      <mat-icon class="mr-3">settings</mat-icon> Settings
    </li>
  </ul>

  <div class="mt-auto pt-10">
    <button (click)="logout()" class="bg-white text-black border-none p-3 cursor-pointer w-full font-bold flex justify-between items-center rounded-lg hover:bg-gray-100 transition-colors font-body">
      Log Out
      <mat-icon class="text-black">logout</mat-icon>
    </button>
  </div>
</div>